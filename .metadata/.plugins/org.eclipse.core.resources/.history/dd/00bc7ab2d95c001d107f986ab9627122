/*
 * button.c
 *
 *  Created on: Nov 5, 2022
 *      Author: nguye
 */
#include "button.h"
#include "main.h"

int keyEvent0 = NORMAL_STATE;
int keyEvent1 = NORMAL_STATE;
int keyEvent2 = NORMAL_STATE;

int keyEvent3 = NORMAL_STATE;

int timerCount = 0;
void getINCInput(int counter) {
	keyEvent0 = keyEvent1;
	keyEvent1 = keyEvent2;
	keyEvent2 = HAL_GPIO_ReadPin(INC_BUTTON_GPIO_Port, INC_BUTTON_Pin);
	if(keyEvent0 == keyEvent1 && keyEvent1 == keyEvent2) {
		if(keyEvent3 != keyEvent2) {
			keyEvent3 = keyEvent2;
			if(keyEvent2 == PRESSED_STATE) {
				counter += 1;
				timerCount = 300;
				if(counter > 9) counter = 0;
				display7SEG(counter, GPIOA, a_1_Pin, b_1_Pin, c_1_Pin, d_1_Pin, e_1_Pin, f_1_Pin, g_1_Pin);
			}
		}
		else {
			timerCount--;
			if(timerCount <= 0) {
				timerCount = 100;

				//Implement here
				counter += 1;
				display7SEG(counter, GPIOA, a_1_Pin, b_1_Pin, c_1_Pin, d_1_Pin, e_1_Pin, f_1_Pin, g_1_Pin);
			}
		}
	}

}

